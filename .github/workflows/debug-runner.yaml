name: Debug Runner Group

on:
  workflow_dispatch:
  push:
    branches:
      - deploy-katana

jobs:
  test-runner:
    name: Test Runner Connectivity
    runs-on:
      group: 8569-caasaikatanaapps
      labels: self-hosted
    steps:
      - name: Basic System Info
        run: |
          echo "ğŸ” Testing runner group: 8569-caasaikatanaapps"
          echo "Runner hostname: $(hostname)"
          echo "Runner user: $(whoami)"
          echo "Current directory: $(pwd)"
          echo "Current time: $(date)"

      - name: Test Docker Availability
        run: |
          echo "ğŸ³ Testing Docker..."
          docker --version || echo "âŒ Docker not available"
          docker info || echo "âŒ Docker daemon not accessible"

      - name: Test Environment
        run: |
          echo "ğŸŒ Environment variables:"
          env | grep -E "(GITHUB_|RUNNER_)" | sort

      - name: Test Network
        run: |
          echo "ğŸŒ Testing network connectivity..."
          ping -c 2 github.com || echo "âŒ Cannot reach github.com"

      - name: Success Message
        run: |
          echo "âœ… Runner group '8569-caasaikatanaapps' is working!"
          echo "ğŸ‰ All basic tests passed"
